<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SelfBot Panel - Ultimate Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            animation: gradientBG 15s ease infinite;
            background-size: 400% 400%;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header avec glassmorphism */
        .glass-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            transform: translateY(0);
            transition: all 0.3s;
        }
        
        .glass-header:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 45px rgba(0,0,0,0.3);
        }
        
        .header-title {
            font-size: 3em;
            font-weight: 700;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }
        
        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .stat-value {
            font-size: 3em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-icon {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 3em;
            opacity: 0.1;
        }
        
        /* Formulaire d'ajout */
        .add-section {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }
        
        .section-title {
            font-size: 1.8em;
            margin-bottom: 25px;
            color: #333;
            border-left: 5px solid #667eea;
            padding-left: 20px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .input-group {
            position: relative;
        }
        
        .input-group i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #667eea;
            font-size: 1.2em;
        }
        
        .input-field {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .input-field:focus {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102,126,234,0.2);
            outline: none;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102,126,234,0.4);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid #667eea;
            color: #667eea;
        }
        
        .btn-outline:hover {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        /* Grille des bots */
        .bots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .bot-card {
            background: white;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 1px solid rgba(255,255,255,0.2);
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .bot-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }
        
        .bot-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .bot-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .bot-status {
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 0.9em;
            font-weight: 600;
        }
        
        .status-online {
            background: #4CAF50;
            color: white;
        }
        
        .status-idle {
            background: #FFC107;
            color: #333;
        }
        
        .status-dnd {
            background: #F44336;
            color: white;
        }
        
        .status-offline {
            background: #9E9E9E;
            color: white;
        }
        
        .bot-body {
            padding: 20px;
        }
        
        .bot-info {
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-icon {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            font-size: 1em;
        }
        
        .voice-controls {
            background: #f0f2f5;
            border-radius: 15px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .voice-input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .action-btn {
            padding: 10px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 0.9em;
        }
        
        .action-join {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
        }
        
        .action-leave {
            background: linear-gradient(45deg, #F44336, #da190b);
            color: white;
        }
        
        .action-status {
            background: linear-gradient(45deg, #FFC107, #ffb300);
            color: #333;
        }
        
        .action-pfp {
            background: linear-gradient(45deg, #9C27B0, #7b1fa2);
            color: white;
        }
        
        .action-delete {
            background: linear-gradient(45deg, #607D8B, #455A64);
            color: white;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Console */
        .console-section {
            background: #1a1a2e;
            border-radius: 30px;
            padding: 25px;
            margin: 30px 0;
            color: #00ff00;
        }
        
        .console-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .console-title {
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .console-output {
            background: #0f0f1f;
            border-radius: 15px;
            padding: 20px;
            height: 250px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            border: 1px solid #00ff00;
            box-shadow: inset 0 0 20px rgba(0,255,0,0.1);
        }
        
        .console-line {
            padding: 5px;
            border-bottom: 1px solid rgba(0,255,0,0.1);
            animation: slideIn 0.3s;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-10px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .log-success { color: #00ff00; }
        .log-error { color: #ff4444; }
        .log-info { color: #ffff00; }
        .log-command { color: #00ffff; }
        
        .console-input-area {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        .console-input {
            flex: 1;
            padding: 15px;
            background: #0f0f1f;
            border: 1px solid #00ff00;
            border-radius: 15px;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }
        
        .console-input:focus {
            outline: none;
            box-shadow: 0 0 20px #00ff00;
        }
        
        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 30px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            animation: modalSlideIn 0.5s;
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-btn {
            font-size: 2em;
            cursor: pointer;
            color: #666;
        }
        
        /* Quick actions */
        .quick-actions {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .quick-btn {
            padding: 12px 25px;
            background: white;
            border: none;
            border-radius: 30px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .quick-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        /* Toast notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border-radius: 15px;
            padding: 15px 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: toastSlideIn 0.5s;
            z-index: 1001;
        }
        
        @keyframes toastSlideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .toast.success { border-left: 4px solid #4CAF50; }
        .toast.error { border-left: 4px solid #F44336; }
        .toast.info { border-left: 4px solid #2196F3; }
        
        /* Loading spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .bots-grid {
                grid-template-columns: 1fr;
            }
            
            .header-title {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Glass -->
        <div class="glass-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1 class="header-title">‚ö° SELFBOT ULTIMATE</h1>
                    <p style="color: #666; margin-top: 10px;">G√©rez vos tokens avec puissance et style</p>
                </div>
                <div class="quick-actions">
                    <button class="quick-btn" onclick="showCommandPalette()"><span>‚åò</span> Commandes</button>
                    <button class="quick-btn" onclick="showSettings()"><span>‚öôÔ∏è</span> Settings</button>
                    <button class="quick-btn" onclick="exportData()"><span>üì§</span> Export</button>
                    <button class="quick-btn" onclick="importData()"><span>üì•</span> Import</button>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-icon">ü§ñ</span>
                    <div class="stat-value" id="totalBots">0</div>
                    <div class="stat-label">Bots Totaux</div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">üü¢</span>
                    <div class="stat-value" id="onlineBots">0</div>
                    <div class="stat-label">En Ligne</div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">üîä</span>
                    <div class="stat-value" id="voiceBots">0</div>
                    <div class="stat-label">En Vocal</div>
                </div>
                <div class="stat-card">
                    <span class="stat-icon">‚ö°</span>
                    <div class="stat-value" id="uptime">100%</div>
                    <div class="stat-label">Performance</div>
                </div>
            </div>
        </div>
        
        <!-- Add Token Section -->
        <div class="add-section">
            <h2 class="section-title">‚ûï Ajouter un Token</h2>
            <div class="form-grid">
                <div class="input-group">
                    <i>üîë</i>
                    <input type="text" class="input-field" id="tokenInput" placeholder="Token Discord">
                </div>
                <div class="input-group">
                    <i>üìù</i>
                    <input type="text" class="input-field" id="nameInput" placeholder="Nom du bot">
                </div>
                <div class="input-group">
                    <i>üéØ</i>
                    <select class="input-field" id="statusSelect">
                        <option value="online">En ligne</option>
                        <option value="idle">Absent</option>
                        <option value="dnd">Ne pas d√©ranger</option>
                        <option value="invisible">Invisible</option>
                    </select>
                </div>
                <button class="btn" onclick="addToken()">
                    <span>‚ûï</span> Ajouter
                </button>
            </div>
            
            <!-- Quick Add Examples -->
            <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                <span style="color: #666;">Exemples:</span>
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickAdd('example1')">Bot 1</button>
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickAdd('example2')">Bot 2</button>
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickAdd('example3')">Bot 3</button>
            </div>
        </div>
        
        <!-- Bots Grid -->
        <div id="botsContainer" class="bots-grid">
            <!-- Les bots seront charg√©s ici -->
        </div>
        
        <!-- Console Section -->
        <div class="console-section">
            <div class="console-header">
                <div class="console-title">
                    <span>üíª</span> Console de Commande
                </div>
                <div>
                    <button class="btn-outline" style="padding: 8px 15px;" onclick="clearConsole()">
                        <span>üóëÔ∏è</span> Effacer
                    </button>
                </div>
            </div>
            
            <div class="console-output" id="consoleOutput">
                <div class="console-line log-info">üöÄ Console initialis√©e...</div>
                <div class="console-line log-success">‚úÖ Pr√™t √† recevoir des commandes</div>
                <div class="console-line log-command">> Tapez 'help' pour la liste des commandes</div>
            </div>
            
            <div class="console-input-area">
                <input type="text" class="console-input" id="commandInput" placeholder="> Entrez une commande..." onkeypress="handleCommandKey(event)">
                <button class="btn" onclick="executeCommand()">
                    <span>‚èé</span> Envoyer
                </button>
            </div>
            
            <!-- Quick Commands -->
            <div style="display: flex; gap: 10px; margin-top: 15px; flex-wrap: wrap;">
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickCommand('help')">help</button>
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickCommand('status online')">status online</button>
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickCommand('status idle')">status idle</button>
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickCommand('status dnd')">status dnd</button>
                <button class="btn-outline" style="padding: 8px 15px;" onclick="quickCommand('leave all')">leave all</button>
            </div>
        </div>
    </div>
    
    <!-- Modal Multi-Select -->
    <div class="modal" id="multiSelectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üîä Multi-Join</h2>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
            
            <div class="form-group" style="margin: 15px 0;">
                <label>Tokens s√©lectionn√©s:</label>
                <div style="background: #f0f2f5; padding: 10px; border-radius: 10px; margin: 10px 0;" id="selectedTokensList"></div>
            </div>
            
            <div class="input-group" style="margin: 15px 0;">
                <i>üì¢</i>
                <input type="text" class="input-field" id="modalChannelId" placeholder="ID du salon vocal">
            </div>
            
            <div class="input-group" style="margin: 15px 0;">
                <i>üéµ</i>
                <input type="text" class="input-field" id="modalAudioSource" placeholder="Fichier audio ou lien YouTube">
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button class="btn" onclick="executeMultiJoin()">Ex√©cuter</button>
                <button class="btn-outline" onclick="closeModal()">Annuler</button>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div id="toastContainer" style="position: fixed; bottom: 20px; right: 20px; z-index: 1002;"></div>
    
    <script>
        // Configuration
        const SERVER_URL = localStorage.getItem('serverUrl') || 'https://your-backend-url.com';
        let tokens = [];
        let selectedTokens = new Set();
        let commandHistory = [];
        let historyIndex = -1;
        
        // Initialisation
        window.onload = function() {
            loadTokens();
            setupKeyboardShortcuts();
            animateStats();
        };
        
        // Animation des stats
        function animateStats() {
            const stats = document.querySelectorAll('.stat-value');
            stats.forEach(stat => {
                const target = parseInt(stat.textContent);
                let current = 0;
                const interval = setInterval(() => {
                    if (current < target) {
                        current++;
                        stat.textContent = current;
                    } else {
                        clearInterval(interval);
                    }
                }, 10);
            });
        }
        
        // Charger les tokens depuis le localStorage
        function loadTokens() {
            const saved = localStorage.getItem('discordTokens');
            if (saved) {
                tokens = JSON.parse(saved);
            } else {
                // Tokens de d√©monstration
                tokens = [
                    { id: 1, name: 'Bot Principal', username: 'Bot#1234', status: 'online', in_voice: 0, avatar: 'https://via.placeholder.com/60' },
                    { id: 2, name: 'Bot Secondaire', username: 'Bot2#5678', status: 'idle', in_voice: 0, avatar: 'https://via.placeholder.com/60' },
                    { id: 3, name: 'Bot Backup', username: 'Bot3#9012', status: 'offline', in_voice: 0, avatar: 'https://via.placeholder.com/60' },
                ];
            }
            renderBots();
            updateStats();
        }
        
        // Rendre les bots
        function renderBots() {
            const container = document.getElementById('botsContainer');
            container.innerHTML = '';
            
            tokens.forEach((token, index) => {
                const card = document.createElement('div');
                card.className = 'bot-card';
                card.setAttribute('data-id', token.id);
                card.onclick = (e) => {
                    if (e.ctrlKey) {
                        toggleSelect(token.id);
                    } else if (e.shiftKey) {
                        selectRange(index);
                    }
                };
                
                const statusClass = `status-${token.status || 'offline'}`;
                const voiceStatus = token.in_voice ? 'üîä En vocal' : 'üîá Pas en vocal';
                
                card.innerHTML = `
                    <div class="bot-header">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <img src="${token.avatar || 'https://via.placeholder.com/60'}" class="bot-avatar">
                            <div>
                                <h3 style="margin-bottom: 5px;">${token.name || 'Sans nom'}</h3>
                                <small>${token.username || 'Inconnu'}</small>
                            </div>
                        </div>
                        <span class="bot-status ${statusClass}">${token.status || 'offline'}</span>
                    </div>
                    
                    <div class="bot-body">
                        <div class="bot-info">
                            <div class="info-item">
                                <span class="info-icon">üÜî</span>
                                <span>ID: ${token.id || 'N/A'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-icon">üîä</span>
                                <span>${voiceStatus}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-icon">‚è∞</span>
                                <span>Derni√®re activit√©: ${token.lastSeen || 'Maintenant'}</span>
                            </div>
                        </div>
                        
                        <div class="voice-controls">
                            <input type="text" class="voice-input" id="channel-${token.id}" placeholder="ID du vocal">
                            <input type="text" class="voice-input" id="audio-${token.id}" placeholder="Lien YouTube ou .mp3">
                        </div>
                        
                        <div class="action-buttons">
                            <button class="action-btn action-join" onclick="event.stopPropagation(); joinVoice(${token.id})">
                                <span>üîä</span> Join
                            </button>
                            <button class="action-btn action-leave" onclick="event.stopPropagation(); leaveVoice(${token.id})">
                                <span>‚èπÔ∏è</span> Leave
                            </button>
                            <button class="action-btn action-status" onclick="event.stopPropagation(); showStatusMenu(${token.id})">
                                <span>üîÑ</span> Status
                            </button>
                            <button class="action-btn action-pfp" onclick="event.stopPropagation(); changePFP(${token.id})">
                                <span>üñºÔ∏è</span> PFP
                            </button>
                            <button class="action-btn action-delete" onclick="event.stopPropagation(); deleteToken(${token.id})">
                                <span>üóëÔ∏è</span> Delete
                            </button>
                        </div>
                    </div>
                `;
                
                if (selectedTokens.has(token.id)) {
                    card.style.border = '3px solid #667eea';
                    card.style.transform = 'scale(1.02)';
                }
                
                container.appendChild(card);
            });
        }
        
        // S√©lection multiple
        function toggleSelect(id) {
            if (selectedTokens.has(id)) {
                selectedTokens.delete(id);
            } else {
                selectedTokens.add(id);
            }
            renderBots();
            showToast(`${selectedTokens.size} token(s) s√©lectionn√©(s)`, 'info');
        }
        
        function selectRange(endIndex) {
            // Logique de s√©lection de plage
            showToast('Range selection active', 'info');
        }
        
        // Ajouter un token
        function addToken() {
            const token = document.getElementById('tokenInput').value;
            const name = document.getElementById('nameInput').value || `Bot ${tokens.length + 1}`;
            const status = document.getElementById('statusSelect').value;
            
            if (!token) {
                showToast('‚ùå Veuillez entrer un token', 'error');
                return;
            }
            
            const newToken = {
                id: tokens.length + 1,
                token: token,
                name: name,
                username: `Bot${Math.floor(Math.random() * 10000)}`,
                status: status,
                in_voice: 0,
                avatar: `https://ui-avatars.com/api/?name=${name}&background=667eea&color=fff&size=60`,
                lastSeen: new Date().toLocaleTimeString()
            };
            
            tokens.push(newToken);
            saveTokens();
            renderBots();
            updateStats();
            
            document.getElementById('tokenInput').value = '';
            document.getElementById('nameInput').value = '';
            
            showToast(`‚úÖ Bot "${name}" ajout√© avec succ√®s!`, 'success');
            logToConsole(`Token ajout√©: ${name}`, 'success');
        }
        
        // Quick add examples
        function quickAdd(type) {
            const examples = {
                example1: { token: 'MTExMTExMTExMTEx', name: 'Bot Principal' },
                example2: { token: 'MjIyMjIyMjIyMjIy', name: 'Bot Secondaire' },
                example3: { token: 'MzMzMzMzMzMzMzMz', name: 'Bot Backup' }
            };
            
            document.getElementById('tokenInput').value = examples[type].token;
            document.getElementById('nameInput').value = examples[type].name;
        }
        
        // Actions vocales
        function joinVoice(tokenId) {
            const channelId = document.getElementById(`channel-${tokenId}`).value;
            const audio = document.getElementById(`audio-${tokenId}`).value;
            
            if (!channelId || !audio) {
                showToast('‚ùå Channel ID et audio requis', 'error');
                return;
            }
            
            const token = tokens.find(t => t.id === tokenId);
            token.in_voice = 1;
            saveTokens();
            renderBots();
            
            showToast(`üîä ${token.name} rejoint le vocal`, 'success');
            logToConsole(`${token.name} rejoint ${channelId} avec ${audio}`, 'success');
        }
        
        function leaveVoice(tokenId) {
            const token = tokens.find(t => t.id === tokenId);
            token.in_voice = 0;
            saveTokens();
            renderBots();
            
            showToast(`‚èπÔ∏è ${token.name} quitte le vocal`, 'info');
            logToConsole(`${token.name} a quitt√© le vocal`, 'info');
        }
        
        // Multi-join
        function openMultiJoin() {
            if (selectedTokens.size === 0) {
                showToast('‚ùå S√©lectionnez au moins un token', 'error');
                return;
            }
            
            const list = document.getElementById('selectedTokensList');
            const selectedNames = tokens.filter(t => selectedTokens.has(t.id)).map(t => t.name).join(', ');
            list.textContent = selectedNames;
            
            document.getElementById('multiSelectModal').classList.add('active');
        }
        
        function executeMultiJoin() {
            const channelId = document.getElementById('modalChannelId').value;
            const audio = document.getElementById('modalAudioSource').value;
            
            if (!channelId || !audio) {
                showToast('‚ùå Remplissez tous les champs', 'error');
                return;
            }
            
            selectedTokens.forEach(id => {
                const token = tokens.find(t => t.id === id);
                token.in_voice = 1;
                logToConsole(`${token.name} rejoint ${channelId}`, 'success');
            });
            
            saveTokens();
            renderBots();
            closeModal();
            showToast(`‚úÖ ${selectedTokens.size} bots ont rejoint le vocal`, 'success');
        }
        
        // Commandes console
        function handleCommandKey(event) {
            if (event.key === 'Enter') {
                executeCommand();
            } else if (event.key === 'ArrowUp') {
                navigateHistory(-1);
            } else if (event.key === 'ArrowDown') {
                navigateHistory(1);
            }
        }
        
        function executeCommand() {
            const input = document.getElementById('commandInput');
            const command = input.value.trim();
            
            if (!command) return;
            
            logToConsole(`> ${command}`, 'command');
            commandHistory.push(command);
            historyIndex = commandHistory.length;
            
            // Parser la commande
            const args = command.split(' ');
            const cmd = args[0].toLowerCase();
            
            switch(cmd) {
                case 'help':
                    showHelp();
                    break;
                    
                case 'tokens':
                    listAllTokens();
                    break;
                    
                case 'join':
                    if (args.length < 3) {
                        logToConsole('Usage: join <channel_id> <audio>', 'error');
                    } else {
                        selectedTokens.forEach(id => {
                            document.getElementById(`channel-${id}`).value = args[1];
                            document.getElementById(`audio-${id}`).value = args[2];
                            joinVoice(id);
                        });
                    }
                    break;
                    
                case 'leave':
                    selectedTokens.forEach(id => leaveVoice(id));
                    break;
                    
                case 'status':
                    if (args.length < 2) {
                        logToConsole('Usage: status <online/idle/dnd/invisible>', 'error');
                    } else {
                        selectedTokens.forEach(id => {
                            const token = tokens.find(t => t.id === id);
                            token.status = args[1];
                            logToConsole(`${token.name} status ‚Üí ${args[1]}`, 'success');
                        });
                        saveTokens();
                        renderBots();
                    }
                    break;
                    
                case 'select':
                    if (args[1] === 'all') {
                        tokens.forEach(t => selectedTokens.add(t.id));
                        logToConsole(`${tokens.length} tokens s√©lectionn√©s`, 'success');
                    } else if (args[1] === 'none') {
                        selectedTokens.clear();
                        logToConsole('S√©lection vid√©e', 'info');
                    } else if (args[1] === 'online') {
                        selectedTokens.clear();
                        tokens.filter(t => t.status === 'online').forEach(t => selectedTokens.add(t.id));
                        logToConsole(`S√©lection: ${selectedTokens.size} tokens en ligne`, 'success');
                    }
                    renderBots();
                    break;
                    
                case 'clear':
                    document.getElementById('consoleOutput').innerHTML = '';
                    logToConsole('Console effac√©e', 'info');
                    break;
                    
                default:
                    logToConsole(`Commande inconnue: ${cmd}. Tapez 'help'`, 'error');
            }
            
            input.value = '';
        }
        
        function showHelp() {
            const help = [
                '=== COMMANDES DISPONIBLES ===',
                'help                 - Affiche cette aide',
                'tokens               - Liste tous les tokens',
                'join <id> <audio>    - Rejoint un vocal',
                'leave                - Quitte le vocal',
                'status <mode>        - Change le statut',
                'select all/none/online - S√©lection multiple',
                'clear                - Efface la console',
                '',
                '=== RACCOURCIS ===',
                'Ctrl+Click : S√©lection multiple',
                'Shift+Click : S√©lection de plage',
                '‚Üë/‚Üì : Navigation historique'
            ];
            
            help.forEach(line => logToConsole(line, 'info'));
        }
        
        function listAllTokens() {
            logToConsole('=== LISTE DES TOKENS ===', 'info');
            tokens.forEach((t, i) => {
                const status = t.status || 'offline';
                const voice = t.in_voice ? 'üîä' : 'üîá';
                logToConsole(`[${i+1}] ${t.name} - ${status} ${voice}`, t.status === 'online' ? 'success' : 'info');
            });
        }
        
        function logToConsole(message, type = 'info') {
            const output = document.getElementById('consoleOutput');
            const line = document.createElement('div');
            line.className = `console-line log-${type}`;
            
            const timestamp = new Date().toLocaleTimeString();
            line.textContent = `[${timestamp}] ${message}`;
            
            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
        }
        
        function quickCommand(cmd) {
            document.getElementById('commandInput').value = cmd;
            executeCommand();
        }
        
        function clearConsole() {
            document.getElementById('consoleOutput').innerHTML = '';
            logToConsole('Console effac√©e', 'info');
        }
        
        function navigateHistory(direction) {
            if (commandHistory.length === 0) return;
            
            historyIndex += direction;
            if (historyIndex < 0) historyIndex = 0;
            if (historyIndex >= commandHistory.length) historyIndex = commandHistory.length - 1;
            
            document.getElementById('commandInput').value = commandHistory[historyIndex];
        }
        
        // Gestion des raccourcis clavier
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'a') {
                    e.preventDefault();
                    tokens.forEach(t => selectedTokens.add(t.id));
                    renderBots();
                    showToast('Tous les tokens s√©lectionn√©s', 'success');
                }
                
                if (e.ctrlKey && e.key === 'd') {
                    e.preventDefault();
                    selectedTokens.clear();
                    renderBots();
                    showToast('S√©lection vid√©e', 'info');
                }
                
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
        }
        
        // Sauvegarde
        function saveTokens() {
            localStorage.setItem('discordTokens', JSON.stringify(tokens));
        }
        
        function exportData() {
            const dataStr = JSON.stringify(tokens, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `tokens_backup_${new Date().toISOString()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('üì§ Donn√©es export√©es', 'success');
        }
        
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        const imported = JSON.parse(e.target.result);
                        tokens = imported;
                        saveTokens();
                        renderBots();
                        updateStats();
                        showToast(`‚úÖ ${tokens.length} tokens import√©s`, 'success');
                    } catch (err) {
                        showToast('‚ùå Fichier invalide', 'error');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // Statistiques
        function updateStats() {
            document.getElementById('totalBots').textContent = tokens.length;
            document.getElementById('onlineBots').textContent = tokens.filter(t => t.status === 'online').length;
            document.getElementById('voiceBots').textContent = tokens.filter(t => t.in_voice).length;
        }
        
        // Notifications toast
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <span style="font-size: 1.2em;">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
                <span>${message}</span>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'toastSlideOut 0.5s';
                setTimeout(() => toast.remove(), 500);
            }, 3000);
        }
        
        // Modal
        function closeModal() {
            document.getElementById('multiSelectModal').classList.remove('active');
        }
        
        // Command palette
        function showCommandPalette() {
            const commands = ['help', 'tokens', 'join', 'leave', 'status', 'clear'];
            const cmd = prompt('Commande rapide:', commands.join(', '));
            if (cmd) quickCommand(cmd);
        }
        
        function showSettings() {
            const url = prompt('URL du serveur backend:', SERVER_URL);
            if (url) {
                localStorage.setItem('serverUrl', url);
                showToast('Configuration sauvegard√©e', 'success');
            }
        }
        
        // Status menu
        function showStatusMenu(tokenId) {
            const status = prompt('Changer status (online/idle/dnd/invisible):');
            if (status) {
                const token = tokens.find(t => t.id === tokenId);
                token.status = status;
                saveTokens();
                renderBots();
                showToast(`Status chang√© pour ${token.name}`, 'success');
            }
        }
        
        // Change PFP
        function changePFP(tokenId) {
            showToast('üé® Upload de photo de profil...', 'info');
            // Logique d'upload d'image
        }
        
        // Delete token
        function deleteToken(tokenId) {
            if (confirm('Supprimer ce token ?')) {
                tokens = tokens.filter(t => t.id !== tokenId);
                selectedTokens.delete(tokenId);
                saveTokens();
                renderBots();
                updateStats();
                showToast('Token supprim√©', 'success');
            }
        }
        
        // Animation suppl√©mentaire
        setInterval(() => {
            document.querySelectorAll('.stat-card').forEach(card => {
                card.style.transform = `translateY(${Math.sin(Date.now() / 1000) * 5}px)`;
            });
        }, 50);
    </script>
</body>
</html>
